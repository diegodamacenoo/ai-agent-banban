{
  "$schema": "http://json-schema.org/draft/2020-12/schema",
  "$id": "https://banban.com.br/schemas/modules/banban-insights/settings",
  "title": "BanBan Insights Module Settings",
  "description": "Schema de configurações para o módulo BanBan Insights",
  "type": "object",
  "properties": {
    "general": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Habilita/desabilita o módulo"
        },
        "update_interval": {
          "type": "integer",
          "minimum": 60,
          "maximum": 86400,
          "default": 300,
          "description": "Intervalo de atualização em segundos"
        },
        "max_insights_per_generation": {
          "type": "integer",
          "minimum": 10,
          "maximum": 100,
          "default": 50,
          "description": "Máximo de insights por geração"
        }
      },
      "required": ["enabled"],
      "additionalProperties": false
    },
    "business_rules": {
      "type": "object",
      "properties": {
        "critical_stock_level": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100,
          "default": 10,
          "description": "Nível crítico de estoque"
        },
        "low_margin_threshold": {
          "type": "number",
          "minimum": 0.01,
          "maximum": 1.0,
          "default": 0.31,
          "description": "Limite de margem baixa (0.31 = 31%)"
        },
        "slow_moving_days_threshold": {
          "type": "integer",
          "minimum": 7,
          "maximum": 365,
          "default": 30,
          "description": "Dias para considerar produto parado"
        },
        "priority_weights": {
          "type": "object",
          "properties": {
            "financial": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "default": 0.4,
              "description": "Peso do impacto financeiro"
            },
            "urgency": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "default": 0.3,
              "description": "Peso da urgência"
            },
            "impact": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "default": 0.3,
              "description": "Peso do impacto operacional"
            }
          },
          "required": ["financial", "urgency", "impact"],
          "additionalProperties": false
        }
      },
      "required": ["critical_stock_level", "low_margin_threshold", "slow_moving_days_threshold"],
      "additionalProperties": false
    },
    "caching": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Habilita cache de insights"
        },
        "ttl": {
          "type": "integer",
          "minimum": 300,
          "maximum": 86400,
          "default": 1800,
          "description": "TTL do cache em segundos"
        },
        "max_entries": {
          "type": "integer",
          "minimum": 100,
          "maximum": 10000,
          "default": 1000,
          "description": "Máximo de entradas no cache"
        }
      },
      "required": ["enabled"],
      "additionalProperties": false
    },
    "performance": {
      "type": "object",
      "properties": {
        "max_concurrent_analysis": {
          "type": "integer",
          "minimum": 1,
          "maximum": 20,
          "default": 5,
          "description": "Máximo de análises simultâneas"
        },
        "timeout_ms": {
          "type": "integer",
          "minimum": 1000,
          "maximum": 60000,
          "default": 30000,
          "description": "Timeout para análises em ms"
        },
        "retry_attempts": {
          "type": "integer",
          "minimum": 0,
          "maximum": 5,
          "default": 3,
          "description": "Tentativas de retry em caso de erro"
        },
        "target_generation_time_ms": {
          "type": "integer",
          "minimum": 1000,
          "maximum": 30000,
          "default": 5000,
          "description": "Tempo alvo de geração em ms"
        }
      },
      "required": ["max_concurrent_analysis", "timeout_ms"],
      "additionalProperties": false
    },
    "notifications": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Habilita notificações"
        },
        "channels": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["email", "webhook", "dashboard", "mobile"]
          },
          "default": ["dashboard"],
          "description": "Canais de notificação"
        },
        "severity_filter": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["CRITICAL", "ATTENTION", "MODERATE", "OPPORTUNITY"]
          },
          "default": ["CRITICAL", "ATTENTION"],
          "description": "Filtro por severidade"
        }
      },
      "required": ["enabled"],
      "additionalProperties": false
    },
    "security": {
      "type": "object",
      "properties": {
        "encryption_enabled": {
          "type": "boolean",
          "default": true,
          "description": "Habilita criptografia de dados sensíveis"
        },
        "audit_enabled": {
          "type": "boolean",
          "default": true,
          "description": "Habilita auditoria de acessos"
        },
        "access_control": {
          "type": "object",
          "properties": {
            "require_approval": {
              "type": "boolean",
              "default": false,
              "description": "Requer aprovação para insights críticos"
            },
            "allowed_roles": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "default": ["admin", "manager", "analyst"],
              "description": "Roles permitidas"
            }
          },
          "additionalProperties": false
        }
      },
      "required": ["encryption_enabled", "audit_enabled"],
      "additionalProperties": false
    },
    "billing": {
      "type": "object",
      "properties": {
        "track_usage": {
          "type": "boolean",
          "default": true,
          "description": "Rastreia uso para cobrança"
        },
        "billing_tier": {
          "type": "string",
          "enum": ["free", "basic", "premium", "enterprise"],
          "default": "premium",
          "description": "Tier de cobrança"
        },
        "usage_limits": {
          "type": "object",
          "properties": {
            "max_calls_per_hour": {
              "type": "integer",
              "minimum": 10,
              "maximum": 10000,
              "default": 1000,
              "description": "Máximo de chamadas por hora"
            },
            "max_insights_per_day": {
              "type": "integer",
              "minimum": 50,
              "maximum": 50000,
              "default": 5000,
              "description": "Máximo de insights por dia"
            }
          },
          "additionalProperties": false
        }
      },
      "required": ["track_usage", "billing_tier"],
      "additionalProperties": false
    },
    "custom": {
      "type": "object",
      "properties": {
        "industry_specific": {
          "type": "object",
          "properties": {
            "fashion_categories": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "default": ["roupas", "calçados", "acessórios", "bolsas"],
              "description": "Categorias específicas de moda"
            },
            "seasonal_analysis": {
              "type": "boolean",
              "default": true,
              "description": "Habilita análise sazonal"
            },
            "size_color_matrix": {
              "type": "boolean",
              "default": true,
              "description": "Análise de matriz tamanho/cor"
            }
          },
          "additionalProperties": false
        },
        "integration_settings": {
          "type": "object",
          "properties": {
            "erp_sync": {
              "type": "boolean",
              "default": true,
              "description": "Sincronização com ERP"
            },
            "external_apis": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "enabled": {
                    "type": "boolean"
                  },
                  "config": {
                    "type": "object"
                  }
                },
                "required": ["name", "enabled"]
              },
              "default": [],
              "description": "APIs externas configuradas"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": true
    }
  },
  "required": ["general", "business_rules", "caching", "performance"],
  "additionalProperties": false
} 
  "$schema": "http://json-schema.org/draft/2020-12/schema",
  "$id": "https://banban.com.br/schemas/modules/banban-insights/settings",
  "title": "BanBan Insights Module Settings",
  "description": "Schema de configurações para o módulo BanBan Insights",
  "type": "object",
  "properties": {
    "general": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Habilita/desabilita o módulo"
        },
        "update_interval": {
          "type": "integer",
          "minimum": 60,
          "maximum": 86400,
          "default": 300,
          "description": "Intervalo de atualização em segundos"
        },
        "max_insights_per_generation": {
          "type": "integer",
          "minimum": 10,
          "maximum": 100,
          "default": 50,
          "description": "Máximo de insights por geração"
        }
      },
      "required": ["enabled"],
      "additionalProperties": false
    },
    "business_rules": {
      "type": "object",
      "properties": {
        "critical_stock_level": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100,
          "default": 10,
          "description": "Nível crítico de estoque"
        },
        "low_margin_threshold": {
          "type": "number",
          "minimum": 0.01,
          "maximum": 1.0,
          "default": 0.31,
          "description": "Limite de margem baixa (0.31 = 31%)"
        },
        "slow_moving_days_threshold": {
          "type": "integer",
          "minimum": 7,
          "maximum": 365,
          "default": 30,
          "description": "Dias para considerar produto parado"
        },
        "priority_weights": {
          "type": "object",
          "properties": {
            "financial": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "default": 0.4,
              "description": "Peso do impacto financeiro"
            },
            "urgency": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "default": 0.3,
              "description": "Peso da urgência"
            },
            "impact": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "default": 0.3,
              "description": "Peso do impacto operacional"
            }
          },
          "required": ["financial", "urgency", "impact"],
          "additionalProperties": false
        }
      },
      "required": ["critical_stock_level", "low_margin_threshold", "slow_moving_days_threshold"],
      "additionalProperties": false
    },
    "caching": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Habilita cache de insights"
        },
        "ttl": {
          "type": "integer",
          "minimum": 300,
          "maximum": 86400,
          "default": 1800,
          "description": "TTL do cache em segundos"
        },
        "max_entries": {
          "type": "integer",
          "minimum": 100,
          "maximum": 10000,
          "default": 1000,
          "description": "Máximo de entradas no cache"
        }
      },
      "required": ["enabled"],
      "additionalProperties": false
    },
    "performance": {
      "type": "object",
      "properties": {
        "max_concurrent_analysis": {
          "type": "integer",
          "minimum": 1,
          "maximum": 20,
          "default": 5,
          "description": "Máximo de análises simultâneas"
        },
        "timeout_ms": {
          "type": "integer",
          "minimum": 1000,
          "maximum": 60000,
          "default": 30000,
          "description": "Timeout para análises em ms"
        },
        "retry_attempts": {
          "type": "integer",
          "minimum": 0,
          "maximum": 5,
          "default": 3,
          "description": "Tentativas de retry em caso de erro"
        },
        "target_generation_time_ms": {
          "type": "integer",
          "minimum": 1000,
          "maximum": 30000,
          "default": 5000,
          "description": "Tempo alvo de geração em ms"
        }
      },
      "required": ["max_concurrent_analysis", "timeout_ms"],
      "additionalProperties": false
    },
    "notifications": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Habilita notificações"
        },
        "channels": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["email", "webhook", "dashboard", "mobile"]
          },
          "default": ["dashboard"],
          "description": "Canais de notificação"
        },
        "severity_filter": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["CRITICAL", "ATTENTION", "MODERATE", "OPPORTUNITY"]
          },
          "default": ["CRITICAL", "ATTENTION"],
          "description": "Filtro por severidade"
        }
      },
      "required": ["enabled"],
      "additionalProperties": false
    },
    "security": {
      "type": "object",
      "properties": {
        "encryption_enabled": {
          "type": "boolean",
          "default": true,
          "description": "Habilita criptografia de dados sensíveis"
        },
        "audit_enabled": {
          "type": "boolean",
          "default": true,
          "description": "Habilita auditoria de acessos"
        },
        "access_control": {
          "type": "object",
          "properties": {
            "require_approval": {
              "type": "boolean",
              "default": false,
              "description": "Requer aprovação para insights críticos"
            },
            "allowed_roles": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "default": ["admin", "manager", "analyst"],
              "description": "Roles permitidas"
            }
          },
          "additionalProperties": false
        }
      },
      "required": ["encryption_enabled", "audit_enabled"],
      "additionalProperties": false
    },
    "billing": {
      "type": "object",
      "properties": {
        "track_usage": {
          "type": "boolean",
          "default": true,
          "description": "Rastreia uso para cobrança"
        },
        "billing_tier": {
          "type": "string",
          "enum": ["free", "basic", "premium", "enterprise"],
          "default": "premium",
          "description": "Tier de cobrança"
        },
        "usage_limits": {
          "type": "object",
          "properties": {
            "max_calls_per_hour": {
              "type": "integer",
              "minimum": 10,
              "maximum": 10000,
              "default": 1000,
              "description": "Máximo de chamadas por hora"
            },
            "max_insights_per_day": {
              "type": "integer",
              "minimum": 50,
              "maximum": 50000,
              "default": 5000,
              "description": "Máximo de insights por dia"
            }
          },
          "additionalProperties": false
        }
      },
      "required": ["track_usage", "billing_tier"],
      "additionalProperties": false
    },
    "custom": {
      "type": "object",
      "properties": {
        "industry_specific": {
          "type": "object",
          "properties": {
            "fashion_categories": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "default": ["roupas", "calçados", "acessórios", "bolsas"],
              "description": "Categorias específicas de moda"
            },
            "seasonal_analysis": {
              "type": "boolean",
              "default": true,
              "description": "Habilita análise sazonal"
            },
            "size_color_matrix": {
              "type": "boolean",
              "default": true,
              "description": "Análise de matriz tamanho/cor"
            }
          },
          "additionalProperties": false
        },
        "integration_settings": {
          "type": "object",
          "properties": {
            "erp_sync": {
              "type": "boolean",
              "default": true,
              "description": "Sincronização com ERP"
            },
            "external_apis": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "enabled": {
                    "type": "boolean"
                  },
                  "config": {
                    "type": "object"
                  }
                },
                "required": ["name", "enabled"]
              },
              "default": [],
              "description": "APIs externas configuradas"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": true
    }
  },
  "required": ["general", "business_rules", "caching", "performance"],
  "additionalProperties": false
} 